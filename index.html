<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Calendario de Adviento ¬∑ AnxanWoman</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #020617;
      --panel: #0b1220;
      --panel-alt: #020617;
      --accent: #60a5fa;
      --text: #f9fafb;
      --muted: #94a3b8;
      --directo: #fb7185;
      --clip: #22c55e;
      --radius: 20px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at 0% 0%, #1d4ed8 0, transparent 50%),
                  radial-gradient(circle at 100% 100%, #0f766e 0, transparent 55%),
                  linear-gradient(160deg, #020617, #020617 60%, #020617);
      color: var(--text);
      padding: 18px 10px 30px;
    }

    .app {
      max-width: 1100px;
      margin: 0 auto;
      background: #020617;
      border-radius: 28px;
      border: 1px solid rgba(148,163,184,.5);
      box-shadow:
        0 0 40px rgba(15,23,42,.9),
        0 0 80px rgba(30,64,175,.4);
      padding: 16px 18px 18px;
    }

    header {
      background: #020617;
      border-radius: 22px;
      padding: 14px 18px;
      border: 1px solid rgba(30,64,175,.5);
      margin-bottom: 12px;
    }

    h1 {
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    h1 span.emoji {
      font-size: 1.7rem;
    }

    .subtitle {
      font-size: 0.85rem;
      color: var(--muted);
      line-height: 1.4;
    }

    /* texto de racha */
    .streak-text {
      font-size: 0.8rem;
      color: #f97316;
      display: block;
      margin-top: 2px;
    }

    /* COUNTDOWN */
    .countdown {
      background: #02091b;
      border-radius: 18px;
      border: 1px solid rgba(37,99,235,.5);
      padding: 10px 14px;
      margin-bottom: 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .countdown-label {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .countdown-values {
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .countdown-values span {
      display: inline-block;
      margin-right: 6px;
    }

    .calendar {
      background: #02091b;
      padding: 16px 16px 18px;
      border-radius: 22px;
      border: 1px solid rgba(15,23,42,.9);
      box-shadow: 0 0 25px rgba(15,23,42,.8);
    }

    .filters {
      display: flex;
      gap: 8px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(51,65,85,.9);
      background: #020617;
      color: var(--muted);
      font-size: 0.8rem;
      cursor: pointer;
      transition: 0.15s;
    }

    .filter-btn.active {
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 0 0 10px rgba(96,165,250,.5);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 720px) {
      .grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    @media (max-width: 480px) {
      .grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .day {
      position: relative;
      background: radial-gradient(circle at 0 0, rgba(96,165,250,.2) 0, transparent 55%), #020b2e;
      border-radius: 18px;
      padding: 10px;
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 1px solid rgba(31,41,55,.9);
      transition: 0.15s;
      overflow: hidden;
    }

    .day:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(15,23,42,.9);
      border-color: rgba(96,165,250,.9);
    }

    .day.opened {
      border-color: gold;
      box-shadow:
        0 0 0 1px rgba(250,204,21,.9),
        0 0 16px rgba(250,204,21,.8);
    }

    .day.special {
      border-color: gold;
      box-shadow:
        0 0 0 1px rgba(250,204,21,.9),
        0 0 20px rgba(250,204,21,.8);
    }

    .day.today {
      border-color: var(--accent);
      box-shadow:
        0 0 0 1px rgba(96,165,250,.9),
        0 0 16px rgba(96,165,250,.5);
    }

    .day.dimmed {
      opacity: 0.35;
      filter: grayscale(0.4);
    }

    .day-number-center {
      font-size: 1.9rem;
      font-weight: 800;
      color: #f9fafb;
      text-shadow:
        0 0 8px rgba(250,204,21,.7),
        0 0 16px rgba(15,23,42,1);
    }

    .day-icon {
      position: absolute;
      top: 8px;
      left: 10px;
      font-size: 1.2rem;
    }

    .day-star {
      position: absolute;
      bottom: 7px;
      right: 10px;
      font-size: 0.95rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,.95);
      border: 1px solid rgba(250,204,21,.9);
      color: #facc15;
      text-shadow: 0 0 6px rgba(250,204,21,.8);
    }

    .day:focus-visible {
      outline: 2px solid #60a5fa;
      outline-offset: 3px;
    }

    .flash-directo {
      animation: flashDirecto 0.4s ease-out;
    }

    .flash-clip {
      animation: flashClip 0.4s ease-out;
    }

    @keyframes flashDirecto {
      0% { box-shadow: 0 0 0 0 rgba(248,113,113,.9); }
      100% { box-shadow: 0 0 18px 6px rgba(248,113,113,0); }
    }

    @keyframes flashClip {
      0% { box-shadow: 0 0 0 0 rgba(34,197,94,.9); }
      100% { box-shadow: 0 0 18px 6px rgba(34,197,94,0); }
    }

    /* MODAL PRINCIPAL */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-backdrop.visible {
      display: flex;
    }

    .modal {
      background: #020617;
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,.6);
      padding: 18px 18px 14px;
      max-width: 480px;
      width: 92%;
      animation: popModal .25s ease-out;
    }

    @keyframes popModal {
      0% { opacity: 0; transform: translateY(10px) scale(.97); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    .modal h2 {
      font-size: 1.2rem;
      margin-bottom: 8px;
    }

    .modal .meta {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .modal .meta span {
      display: inline-block;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(51,65,85,.9);
      background: #020617;
      margin-right: 4px;
      margin-bottom: 4px;
    }

    .modal .meta .directo {
      border-color: rgba(248,113,113,.9);
      color: #fecaca;
    }

    .modal .meta .clip {
      border-color: rgba(34,197,94,.9);
      color: #bbf7d0;
    }

    .modal .meta .gold {
      border-color: rgba(250,204,21,.9);
      color: #facc15;
    }

    .modal-body {
      font-size: 0.9rem;
      line-height: 1.6;
      color: #e5e7eb;
    }

    /* TOAST CENTRAL */
    .center-toast {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #020617;
      padding: 16px 20px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,.8);
      box-shadow:
        0 16px 40px rgba(0,0,0,.9),
        0 0 18px rgba(96,165,250,.4);
      font-size: 0.9rem;
      text-align: center;
      max-width: 320px;
      z-index: 2000;
      opacity: 0;
      animation: toastIn .25s forwards;
    }

    @keyframes toastIn {
      0% { opacity: 0; transform: translate(-50%, -46%); }
      100% { opacity: 1; transform: translate(-50%, -50%); }
    }

    footer {
      margin-top: 10px;
      font-size: 0.75rem;
      color: var(--muted);
      text-align: right;
    }

    .bottom-scene {
      margin-top: 16px;
      text-align: center;
      font-size: 2.2rem;
    }

    .bottom-scene span {
      margin: 0 6px;
      text-shadow: 0 0 18px rgba(15,23,42,.9);
    }

    /* POPUP REDES SOCIALES */
    .social-fab {
      position: fixed;
      bottom: 18px;
      left: 18px;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 1px solid rgba(148,163,184,.8);
      background: #020617;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.2rem;
      box-shadow: 0 10px 25px rgba(0,0,0,.8);
      z-index: 1500;
    }

    .social-popup {
      position: fixed;
      bottom: 70px;
      left: 18px;
      background: #020617;
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,.7);
      padding: 10px 12px 12px;
      width: 260px;
      font-size: 0.85rem;
      box-shadow:
        0 16px 30px rgba(0,0,0,.9),
        0 0 14px rgba(96,165,250,.4);
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
      transition: opacity .18s ease-out, transform .18s ease-out;
      z-index: 1500;
    }

    .social-popup.open {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .social-popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .social-popup-title {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .social-close {
      background: transparent;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 1rem;
      padding: 0 4px;
    }

    .social-list {
      list-style: none;
      margin-top: 4px;
    }

    .social-list li {
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 4px;
      color: var(--muted);
    }

    .social-list a {
      text-decoration: none;
      color: var(--accent);
      font-size: 0.82rem;
    }

    .social-list a span {
      margin-right: 6px;
    }

    .social-code {
      font-size: 0.8rem;
      color: #e5e7eb;
    }

    .social-code strong {
      color: #facc15;
    }

    /* RESUMEN DIARIO AL ENTRAR */
    .daily-summary {
      position: fixed;
      top: 18px;
      left: 50%;
      transform: translateX(-50%);
      background: #020617;
      padding: 14px 18px 12px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,.8);
      box-shadow:
        0 16px 40px rgba(0,0,0,.9),
        0 0 18px rgba(96,165,250,.4);
      font-size: 0.85rem;
      color: #e5e7eb;
      max-width: 360px;
      width: calc(100% - 32px);
      z-index: 2100;
    }

    .daily-summary-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .daily-summary p {
      margin-bottom: 4px;
    }

    .daily-summary strong {
      color: #facc15;
    }

    .daily-summary button {
      margin-top: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.8);
      background: #020617;
      color: #e5e7eb;
      font-size: 0.75rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <main class="app">
    <header>
      <h1><span class="emoji">üéÑ</span> Calendario de Adviento ¬∑ AnxanWoman</h1>
      <p class="subtitle">
        Haz clic en una casilla para ver el evento del d√≠a<br>
        <span id="streakText" class="streak-text"></span>
      </p>
    </header>

    <!-- COUNTDOWN DIA 27 -->
    <section class="countdown" id="countdownBox">
      <div class="countdown-label">Cuenta atr√°s para el gran d√≠a (27 de diciembre)</div>
      <div class="countdown-values" id="countdownValues">
        <span>--d</span><span>--h</span><span>--m</span><span>--s</span>
      </div>
    </section>

    <section class="calendar">
      <div class="filters">
        <button class="filter-btn active" data-filter="todos">Todos</button>
        <button class="filter-btn" data-filter="directos">Directos</button>
        <button class="filter-btn" data-filter="clips">Clips</button>
      </div>

      <div class="grid" id="calendarGrid"></div>
    </section>

    <footer>Dise√±ado para la comunidad de AnxanWoman üíô</footer>

    <div class="bottom-scene">
      <span>üéÑ</span><span>üéÅ</span><span>üéÑ</span><span>üéÅ</span><span>üéÑ</span>
    </div>
  </main>

  <!-- MODAL PRINCIPAL -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal" id="modal">
      <h2 id="modalTitle">D√≠a X</h2>
      <div class="meta">
        <span id="metaMode"></span>
        <span id="metaType"></span>
        <span id="metaPrize"></span>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <!-- BOT√ìN Y POPUP REDES -->
  <button class="social-fab" id="socialFab" type="button" aria-label="Redes sociales">
    üåê
  </button>
  <div class="social-popup open" id="socialPopup">
    <div class="social-popup-header">
      <div class="social-popup-title">S√≠gueme en mis redes</div>
      <button class="social-close" id="socialClose" type="button">‚úï</button>
    </div>
    <ul class="social-list">
      <li>
        <a href="https://www.youtube.com/@AnxanWoman" target="_blank" rel="noopener noreferrer">
          <span>üì∫</span> YouTube
        </a>
      </li>
      <li>
        <a href="https://www.tiktok.com/@anxanwoman" target="_blank" rel="noopener noreferrer">
          <span>üéµ</span> TikTok
        </a>
      </li>
      <li>
        <a href="https://www.twitch.tv/anxanwoman" target="_blank" rel="noopener noreferrer">
          <span>üéÆ</span> Twitch
        </a>
      </li>
      <li class="social-code">
        <span>üß°</span> C√≥digo <strong>AnxanWoman</strong> en la tienda de Fortnite
      </li>
    </ul>
  </div>

  <script>
    const YEAR = 2025;
    // D√≠a 5 es clip, d√≠a 6 es directo con premio
    const DIRECTO_DAYS = [1,2,4,6,8,10,12,13,15,17,19,21,22,26,27];
    const BIG_PRIZE_DAYS = [6,13,21,27];
 
    // Config d√≠as
    const dayConfigs = [
      {
        day: 1, type: "Presentaci√≥n del calendario", vb: 0,
        description: `D√≠a 1. Presentaci√≥n del calendario.<br>
Estar√© en directo a partir de las 18.30 (hora espa√±ola) presentando el calendario de adviento de Fortnite, su funci√≥n y mec√°nica.<br><br>
¬°¬°No te lo pierdas!!`
      },
      {
        day: 2, type: "Directo sorpresa", vb: 0,
        description: `D√≠a 2. Directo Sorpresa<br>
¬øDirecto un martes? Oh Oh Oh, Feliz pre-Navidad.<br>
Nos vemos de 17.30 a 19.15 (hora espa√±ola)`
      },
      {
        day: 3, type: "D√≠a de descanso", vb: 0,
        description: `D√≠a 3. D√≠a de descanso.<br>
Renovaci√≥n de ideas... y descanso tras 5 d√≠as en directo<br>
Recuerdo que ayer sub√≠ nuevo v√≠deo al canal de Youtube, dadle amor <3 <br>
C√≥digo AnxanWoman en Fortnite`
      },
      {
        day: 4, type: "Directo sorpresa", vb: 0,
        description: `D√≠a 4. Decoramos en directo<br>
Directo temprano por ser jueves, horario 17.30 - 19.00<br>
Decoramos el setup de navidad y jugamos unas partidas al Fortnite<br>
¬°Plan de hoy!<br>
Probar los minijuegos del cap√≠tulo 7(nuevo modo)`
      },
      {
        day: 5, type: "Clip resumen", vb: 0,
        description: `D√≠a 5. Clip resumen<br>
Hoy tendr√°s un clip con los mejores momentos de estos primeros d√≠as del calendario de adviento.<br>
¬øTe reconocer√°s en alguna jugada √©pica o momento divertido? üëÄ`
      },
      {
        day: 6, type: "Fashion Show con premio", vb: 2500,
        description: `D√≠a 6. Fashion Show<br>
S√°bado de privadas tem√°ticas... ¬°y con PREMIO!<br>
A partir de las 18.00 (hora espa√±ola) realizaremos un Fashion Show entre toda la comunidad.<br>
¬°El top 3 tiene premio!<br><br>
Premios:<br>
Tercer premio - 500 pavos<br>
Segundo premio - 800 pavos<br>
Primer premio - 1200 pavos`
      },
      {
        day: 7, type: "Clip Sorpresa", vb: 0,
        description: `D√≠a 7. Resumen semanal<br>
¬°Primera semana completada!<br>
¬°Atentos al clip de hoy...!<br>
 
Si contestas correctamente al clip, ¬°participas en un sorteo!<br>
 
Yo que tu no me lo perd√≠a... C√≥digo AnxanWoman en Fortnite`
      },
      {
        day: 8, type: "Directo IRL?", vb: 0,
        description: `D√≠a 8. Posible directo IRL<br>
Estoy en Madrid y no habr√° directo de Fortnite... en cambio... ¬°SORPRESA!<br>
Mini directo IRL (en la vida real) dependiendo del tiempo en Madrid.<br>
Horario por confirmar - Recuerda activar las notificaciones para que te avise de mis directos<br>
Y poner el C√≥digo AnxanWoman en la tienda de Fortnite`
      },
      {
        day: 9, type: "Resumen Semanal", vb: 0,
        description: `D√≠a 9. Clip<br>
¬°Atentos al clip de hoy...!<br>
Si contestas correctamente al clip, ¬°participas en un sorteo!<br>
Yo que tu no me lo perd√≠a... C√≥digo AnxanWoman en Fortnite`
      },
      {
        day: 10, type: "Directo comunidad", vb: 0,
        description: `D√≠a 10. Directo<br>
¬°HOY SI! D√≠a de retos y privadas con la comunidad<br> 
Los ganadores de las privadas obtienen menci√≥n especial<br>
Horario: 18.30 - 21.30`
      },
      {
        day: 11, type: "Clip Sorteo", vb: 0,
        description: `D√≠a 11. Clip Sorteo<br>
¬øRecuerdas los clips pasados de adivinar la respuesta?<br>
HOY OTRO DE REGALO<br>
M√°s posibilidades si respondes a los 2 clips de esta tem√°tica.`
      },
      {
        day: 12, type: "Privada tem√°tica", vb: 0,
        description: `D√≠a 12. PRIVADA TEMATICA`
      },
      {
        day: 13, type: "D√≠a de Premio", vb: 0,
        description: `D√≠a 13. DIA DE SORTEO<br>
Jugaremos al Fortnite... S√≠... habr√° privadas... TAMBI√âN<br>
PERO el premio es para 1 GANADOR.C√≥digo AnxanWoman en la tienda de Fortnite<br>
La persona que m√°s puntos consiga en un QUIZ SOBRE FORTNITE.<br>
Premio: 1200 Pavos`
      },
      {
        day: 14, type: "Clip Mejores Momentos", vb: 1200,
        description: `D√≠a 14. Clip<br>
¬øQuieres ver los mejores momentos de esta semana?<br>
C√≥digo AnxanWoman en la tienda de Fortnite<br>
Atent@ a mi contenido esta tarde. Seguramente salgas en el v√≠deo...`
      },
      {
        day: 15, type: "Directo", vb: 0,
        description: `D√≠a 15. DIRECTO<br>
Comenzamos la semana con unas partidas al Fortnite<br>
En las privadas del directo, los ganadores llevan menci√≥n especial`
      },
      {
        day: 16, type: "Clip sorteo extra", vb: 0,
        description: `D√≠a 16. CLIP<br>
Clip n¬∫3 que pod√©is responder... correctamente y os dar√° una participaci√≥n extra en el sorteo.<br>
¬øA√∫n no sabes el premio? jeje, atent@ al pr√≥ximo directo.`
      },
      {
        day: 17, type: "Directo anuncio premio", vb: 0,
        description: `D√≠a 17. DIRECTO<br>
Desvelamos en directo el d√≠a del sorteo y el PREMIO acumulado.<br>
En las privadas los ganadores se llevan menci√≥n especial durante el pr√≥ximo directo.`
      },
      {
        day: 18, type: "Clip anuncio sorteo", vb: 0,
        description: `D√≠a 18. CLIP<br>
¬øClip de sorteo? ¬°HOY NO!<br>
Clip anunciando fecha y hora del sorteo, c√≥mo participar si te lo has perdido.<br>
¬°¬°QU√â NERVIOS!!`
      },
      {
        day: 19, type: "Privadas", vb: 0,
        description: `D√≠a 19. PRIVADAS`
      },
      {
        day: 20, type: "Clip resumen semana", vb: 0,
        description: `D√çA 20. CLIP<br>
Esta tarde clip resumen del contenido realizado esta semana.<br>
Si vuelves a aparecer esta semana...<br>
¬°Eres un real de la comunidad! aunque seguro prefieres ser Unreal (¬°Bdmmm tss!)`
      },
      {
        day: 21, type: "Directo sorteo", vb: 1200,
        description: `D√≠a 21. DIRECTO SORTEO<br>
Tercera semana de diciembre ya... UY Si hoy hay... ¬°SORTEO!<br>
Ma√±ana se celebra el sorteo de la Loter√≠a de Navidad en Espa√±a, y en mi comunidad, se realiza hoy jeje.<br>
Desvelamos qu√© persona que coment√≥ los clips del sorteo se lleva el premio.`
      },
      {
        day: 22, type: "Directo post-loter√≠a", vb: 0,
        description: `D√≠a 22. DIRECTO SI NO SOY MILLONARIA<br>
¬°VAYA! ¬°VAYA! Si estoy haciendo directo es que no me ha tocado el GORDO de navidad, aunque... afortunada de la comunidad que tengo.<br>
Directo 18.30 - 21.30 (hora espa√±ola)`
      },
      {
        day: 23, type: "Clip mejores momentos", vb: 0,
        description: `D√≠a 23. Clip<br>
Clip de los mejores momentos del directo. ¬øApareces en el v√≠deo?`
      },
      {
        day: 24, type: "Nochebuena (descanso)", vb: 0,
        description: `D√≠a 24. NOCHEBUENA<br>
D√≠a de pasar con la familia. Hoy no hago directo, hay que disfrutar de estos momentos.`
      },
      {
        day: 25, type: "Navidad (descanso)", vb: 0,
        description: `D√≠a 25. NAVIDAD<br>
¬°Feliz Navidad a toda mi comunidad! Espero que lo hay√°is pasado super bien estos dos d√≠as, y que no hay√°is viciado mucho jeje`
      },
      {
        day: 26, type: "Directo postnavidad", vb: 0,
        description: `D√≠a 26. DIRECTO POSTNAVIDAD<br>
¬°SOLO QUEDA UN D√çA! Comentamos en directo todo lo que va a suceder ma√±ana... o casi todo jeje.<br>
¬°HOY LAS ULTIMAS PRIVADAS DEL A√ëO!`
      },
      {
        day: 27, type: "Campanadas + gran sorteo", vb: 3600,
        description: `D√≠a 27. CAMPANADAS FIN DE A√ëO ANXANWOMAN Y GRAN SORTEO<br>
LLEG√ì EL D√çA (m√°s esperado, o menos... seg√∫n lo veas...)<br>
Hoy tenemos... ¬°PLANAZO!<br>
Directo a partir de las 18.00 (hora espa√±ola),<br>
Comenzaremos reaccionando al REWIND 2025 de AnxanWoman.<br>
A las 20.00 haremos la tradici√≥n de comer las uvas y celebrar este fin de a√±o con toda la gente maravillosa de esta comunidad.<br>
¬°NO ME OLVIDO! SORTEAZO DOBLE. Hoy dos personas podr√°n ganar 1800 pavos para gastarse en la tienda de Fortnite.<br>
¬øHab√©is revisado si ten√©is el c√≥digo AnxanWoman en la tienda de Fortnite?`
      }
    ];
    // Totales din√°micos para el resumen: solo d√≠as ya llegados
    function computeSummaryVbTotal() {
      const now = new Date();

      // Si no estamos en diciembre del a√±o del evento, mostramos 0
      if (now.getFullYear() !== YEAR || now.getMonth() !== 11) {
        return 0;
      }

      const today = now.getDate();

      return dayConfigs
        .filter(d => (d.vb || 0) > 0 && d.day <= today)
        .reduce((sum, d) => sum + d.vb, 0);
    }

    const SUMMARY_VB_TOTAL = computeSummaryVbTotal();
    const SUMMARY_CODE_USERS = 37; // üëà actualizado a 37

    const calendarGrid = document.getElementById("calendarGrid");
    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalTitle = document.getElementById("modalTitle");
    const modalBody = document.getElementById("modalBody");
    const metaMode = document.getElementById("metaMode");
    const metaType = document.getElementById("metaType");
    const metaPrize = document.getElementById("metaPrize");
    const countdownValues = document.getElementById("countdownValues");

    // Hoy
    const nowInit = new Date();
    const todayIsDec = (nowInit.getFullYear() === YEAR && nowInit.getMonth() === 11);
    const todayDay = todayIsDec ? nowInit.getDate() : null;

    // Estado de casillas abiertas
    const OPEN_KEY = "anxan_opened_v1";
    const openedSet = new Set(JSON.parse(localStorage.getItem(OPEN_KEY) || "[]"));
    function saveOpened() {
      localStorage.setItem(OPEN_KEY, JSON.stringify(Array.from(openedSet)));
    }

    // Toast central reutilizable
    function showCenterToast(html) {
      const existing = document.querySelector(".center-toast");
      if (existing) existing.remove();
      const div = document.createElement("div");
      div.className = "center-toast";
      div.innerHTML = html;
      document.body.appendChild(div);
      setTimeout(() => {
        if (div.parentNode) div.parentNode.removeChild(div);
      }, 2300);
    }

    // Easter eggs (1 vez por d√≠a real)
    const EGGS_KEY = "anx_eggs_v1";
    let eggs = JSON.parse(localStorage.getItem(EGGS_KEY) || "{}");
    const todayKey = new Date().toISOString().slice(0,10);
    if (!eggs[todayKey]) {
      eggs[todayKey] = { prev:false, prize:false, d27:false, off:false, secret:false };
    }
    function saveEggs() {
      localStorage.setItem(EGGS_KEY, JSON.stringify(eggs));
    }
    function triggerEgg(type, msg) {
      if (eggs[todayKey][type]) return;
      eggs[todayKey][type] = true;
      saveEggs();
      showCenterToast(msg);
    }

    // ‚≠ê Racha de d√≠as visitando el calendario
    const STREAK_KEY = "anx_streak_v1";
    let streakData = JSON.parse(localStorage.getItem(STREAK_KEY) || "null");
    const todayDate = new Date();
    const todayStrFull = todayDate.toISOString().slice(0,10);
    let currentStreak = 1;

    if (streakData && streakData.lastDate) {
      const lastDate = new Date(streakData.lastDate);
      const diffMs = todayDate - lastDate;
      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

      if (diffDays === 0) {
        currentStreak = streakData.streak || 1;
      } else if (diffDays === 1) {
        currentStreak = (streakData.streak || 1) + 1;
      } else {
        currentStreak = 1;
      }
    }

    streakData = { lastDate: todayStrFull, streak: currentStreak };
    localStorage.setItem(STREAK_KEY, JSON.stringify(streakData));

    const streakTextEl = document.getElementById("streakText");
    if (streakTextEl) {
      if (currentStreak <= 1) {
        streakTextEl.textContent = "‚ú® Primer d√≠a de racha en el calendario";
      } else {
        streakTextEl.textContent = `üî• Llevas ${currentStreak} d√≠as seguidos entrando al calendario`;
      }
    }

    // Resumen diario: solo 1 vez por d√≠a
    const SUMMARY_SEEN_KEY = "anx_summary_seen_v1";
    let summarySeen = JSON.parse(localStorage.getItem(SUMMARY_SEEN_KEY) || "{}");

    function saveSummarySeen() {
      localStorage.setItem(SUMMARY_SEEN_KEY, JSON.stringify(summarySeen));
    }

    function maybeShowDailySummary() {
      if (summarySeen[todayKey]) return;

      // texto din√°mico seg√∫n la semana
      const now = new Date();
      let weekLine = "";
      if (now.getFullYear() === YEAR && now.getMonth() === 11) {
        const d = now.getDate();
        if (d <= 7) {
          weekLine = "Estamos en la primera semana del calendario, ¬°esto acaba de empezar! üî•";
        } else if (d <= 14) {
          weekLine = "Segunda semana del calendario, cada vez se vienen m√°s sorpresas üëÄ";
        } else if (d <= 21) {
          weekLine = "Tercera semana‚Ä¶ recta final antes del gran sorteo üß°";
        } else {
          weekLine = "√öltimos d√≠as del calendario, gracias por estar aqu√≠ hasta el final üíô";
        }
      }
      const extraLine = weekLine ? `<p>${weekLine}</p>` : "";

      const div = document.createElement("div");
      div.className = "daily-summary";
      div.innerHTML = `
        <div class="daily-summary-title">Resumen del evento</div>
        <p>Hasta ahora hemos repartido <strong>${SUMMARY_VB_TOTAL} pavos</strong> entre la comunidad üéÅ</p>
        <p><strong>${SUMMARY_CODE_USERS}</strong> personas tienen el c√≥digo <strong>AnxanWoman</strong> en la tienda de Fortnite üíô</p>
        ${extraLine}
        <button type="button">Entendido</button>
      `;

      document.body.appendChild(div);

      const btn = div.querySelector("button");
      btn.addEventListener("click", () => {
        summarySeen[todayKey] = true;
        saveSummarySeen();
        div.remove();
      });
    }

    function openModal(config, mode, hasPrize) {
      modalTitle.textContent = `D√≠a ${config.day}`;
      metaMode.textContent = mode === "directo" ? "Formato: Directo" :
                             mode === "clip" ? "Formato: Clip" : "Formato: ‚Äî";
      metaMode.className = "";
      if (mode === "directo") {
        metaMode.classList.add("directo");
      } else if (mode === "clip") {
        metaMode.classList.add("clip");
      }

      metaType.textContent = `Tipo: ${config.type}`;
      metaType.className = "";

      if (hasPrize) {
        metaPrize.textContent = "Premio activo";
        metaPrize.className = "gold";
      } else {
        metaPrize.textContent = "Premio: sin premio econ√≥mico directo";
        metaPrize.className = "";
      }

      modalBody.innerHTML = config.description;
      modalBackdrop.classList.add("visible");
    }

    function createCard(config) {
      const day = config.day;
      const card = document.createElement("button");
      card.type = "button";
      card.className = "day";
      card.dataset.day = day;

      let mode;
      if (day === 24 || day === 25) mode = "none";
      else mode = DIRECTO_DAYS.includes(day) ? "directo" : "clip";

      card.dataset.mode = mode;

      const icon = mode === "directo" ? "üé•" : mode === "clip" ? "üì±" : "üéÑ";
      const hasPrize = BIG_PRIZE_DAYS.includes(day);

      card.innerHTML = `
        <span class="day-icon">${icon}</span>
        ${hasPrize ? `<span class="day-star">‚≠ê</span>` : ""}
        <span class="day-number-center">${day}</span>
      `;

      if (day === 27) card.classList.add("special");
      if (openedSet.has(day)) card.classList.add("opened");
      if (todayIsDec && todayDay === day) card.classList.add("today");

      card.addEventListener("click", () => {
        const now = new Date();
        const inTargetDec = (now.getFullYear() === YEAR && now.getMonth() === 11);
        const todayNum = inTargetDec ? now.getDate() : null;

        if (inTargetDec && todayNum !== null && day > todayNum) {
          if (BIG_PRIZE_DAYS.includes(day)) {
            triggerEgg("prize", "¬°Qu√© impaciente eres! ‚≠ê<br>Todo llega a su tiempo.");
          }
          if (day === 27) {
            triggerEgg("d27", "¬øLas campanadas ya? üò≥<br>A√∫n falta un poquito üéÜ");
          }

          showCenterToast("A√∫n no puedes abrir esta casilla, espera a que llegue el d√≠a ‚ú®");
          return;
        }

        if (inTargetDec && todayNum !== null && day === todayNum - 1) {
          triggerEgg("prev", "Uy‚Ä¶ esto ya ha pasado üëÄ<br>Ojal√° tener una m√°quina del tiempo.");
        }

        openedSet.add(day);
        saveOpened();
        card.classList.add("opened");

        if (mode === "directo") {
          card.classList.add("flash-directo");
          setTimeout(() => card.classList.remove("flash-directo"), 400);
        } else if (mode === "clip") {
          card.classList.add("flash-clip");
          setTimeout(() => card.classList.remove("flash-clip"), 400);
        }

        openModal(config, mode, hasPrize);
      });

      return card;
    }

    // Pintar calendario
    dayConfigs.forEach(cfg => {
      calendarGrid.appendChild(createCard(cfg));
    });

    // Cerrar modal con click fuera
    modalBackdrop.addEventListener("click", (e) => {
      if (e.target === modalBackdrop) {
        modalBackdrop.classList.remove("visible");
      }
    });

    // Cerrar modal con ESC
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        modalBackdrop.classList.remove("visible");
      }
    });

    // Filtros
    const filterButtons = document.querySelectorAll(".filter-btn");
    function applyFilter(filter) {
      const cards = document.querySelectorAll(".day");
      cards.forEach(card => {
        card.classList.remove("dimmed");
        const mode = card.dataset.mode;
        if (filter === "directos" && mode !== "directo") {
          card.classList.add("dimmed");
        } else if (filter === "clips" && mode !== "clip") {
          card.classList.add("dimmed");
        }
      });
    }

    filterButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        filterButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        applyFilter(btn.dataset.filter);
      });
    });

    applyFilter("todos");

    // Easter egg: llegar al fondo de la p√°gina
    window.addEventListener("scroll", () => {
      const scrollBottom = window.scrollY + window.innerHeight;
      const docHeight = document.documentElement.scrollHeight;
      if (scrollBottom >= docHeight - 20) {
        triggerEgg("secret", "¬°Encontraste el regalo escondido! üéÅ<br>¬°Eres un crack investigando!");
      }
    });

    // COUNTDOWN PARA EL 27 DE DICIEMBRE A LAS 18:00
    const countdownTarget = new Date(YEAR, 11, 27, 18, 0, 0);

    function updateCountdown() {
      const now = new Date();
      const diff = countdownTarget - now;

      if (diff <= 0) {
        countdownValues.innerHTML = "¬°Hoy es el gran d√≠a! üéâ";
        return;
      }

      const totalSeconds = Math.floor(diff / 1000);
      const days = Math.floor(totalSeconds / (60 * 60 * 24));
      const hours = Math.floor((totalSeconds % (60 * 60 * 24)) / (60 * 60));
      const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);
      const seconds = totalSeconds % 60;

      countdownValues.innerHTML = `
        <span>${days}d</span>
        <span>${hours}h</span>
        <span>${minutes}m</span>
        <span>${seconds}s</span>
      `;
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);

    // POPUP REDES SOCIALES
    const socialFab = document.getElementById("socialFab");
    const socialPopup = document.getElementById("socialPopup");
    const socialClose = document.getElementById("socialClose");

    socialFab.addEventListener("click", () => {
      socialPopup.classList.toggle("open");
    });

    socialClose.addEventListener("click", () => {
      socialPopup.classList.remove("open");
    });

    // Mostrar resumen diario (si toca)
    maybeShowDailySummary();
  </script>
</body>
</html>

